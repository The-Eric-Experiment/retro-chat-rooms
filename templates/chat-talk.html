<html>

<head>
  <meta http-equiv="PRAGMA" content="NO-CACHE" />
  <title></title>
</head>

<body bgcolor="{{ .Color }}">
  <table>
    <tbody>
      <tr>
        <td>
          <font color="{{ .TextColor }}">
            <strong>{{ .Nickname }}</strong>
          </font>
          <br />
          <form action="{{ urlLogout }}" method="POST">
            <input type="hidden" name="id" value="{{ .ID }}" />
            <input type="submit" name="exit" value="Exit" />
          </form>
        </td>
        <td>
          <!-- onSubmit="document.talkform.message.value=document.talkform.message2.value;document.talkform.message2.value='';" -->
          <form name="talkform" action="{{urlChatTalk .ID ""}}" method="POST">
            <input type="hidden" name="id" value="{{ .ID }}" />
            <input type="hidden" name="userId" value="{{ .UserId }}" />
            <input type="checkbox" name="private" id="private" /><label for="private">
              <font color="{{ .TextColor }}">Privately</font>
            </label>&nbsp;
            <select name="speechMode">
              {{ range $i, $m := .SpeechModes }}
              <option value="{{ $m.Value }}">{{ $m.Label }}</option>
              {{ end }}
            </select>&nbsp;
            {{if (isUserNotNil .To) }}
            <font color="{{ .TextColor }}">
              <strong>{{ .To.Nickname }}</strong>
            </font>
            <input type="hidden" name="to" value="{{ .To.ID }}" />
            {{else}}
            <font color="{{ .TextColor }}">
              <strong>Everyone</strong>
            </font>
            {{end}}
            <br />
            <input type="text" name="message" size="45" />
            <input tabindex="1" type="submit" value="Send" />
          </form>
        </td>
      </tr>
    </tbody>
  </table>

  {{if .UpdateUpdater}}
  <script language="javascript">
    parent.updater.location = "{{ .ID | urlChatUpdater }}";
  </script>
  {{end}}
</body>

</html>